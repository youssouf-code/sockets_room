<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <section id="app">

      <h1>WebSockets Demo</h1>
 
      <p class="sent">
          <span>SENT:</span>
          <span>message</span>
        </p>
        <p class="rec">
          <span>RECEIVED:</span>
          <span>message</span>
        </p>

        <textarea v-model="message" placeholder="write your message here.."></textarea>

         <button v-on:click="send">send message

         </button>


    </section>


      <style>

            body{
                background-color: #333333;

            }   

            section{
                margin: auto;
                width: 50%;
                font-family: Arial;
                max-width: 600px;
                background-color: #fff;
                border-top: 5px solid #69c773;
                box-sizing: border-box;
                padding: 20px;

            }   
            section h1 {
                margin: 0;
                margin-bottom: 30px;
            }
            section p {
                box-sizing: border-box;
                padding: 5px;
                margin: 0;

            }
             section p span:first-of-type{
                 color: #999999;
                 text-transform: uppercase;
                 font-size: 70%;
             }
             section p.sent{
                 background-color: #f7f7f7;
                 border: 1px solid #eeeeee;

             }

             section textarea{
                 max-width: 100%;
                 max-height:88px; 
                 width: 100%;
                 height: 88px;
                 border: 2px solid #d9d9d9;
                 border-radius: 5px;
                 box-sizing: border-box;
                 padding: 5px;
             }
             button{
                 background-color: #86b23d;
                 padding: 10px;
                 border: none;
                 color: #fff;
                 border-radius: 5px;
             }


    
      
      </style> 
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="js/client.js"></script>
    <script>
        var app = new Vue ({
            el: "#app",
            data (){
                return {
                    message:"",
                    socket:"",
                }
            },
            mounted(){
                this.socket = new WebSocket('ws://localhost:3000');


                this.socket.addEventListener('open', function(){
                console.log('connected to Websocket');
                })  

                this.socket.addEventListener('close', function (){
                    console.log('disconnected from Websocket');
                })

                this.socket.addEventListener('message', function(message){
                    console.log('message from the server:', message);
                })

                this.socket.addEventListener('error', function(error){
                    console.log(error);
                })

                // document.querySelector('button').addEventListener('click',function(){
                //     var text = document.querySelector('input').value;
                //     socket.send(text);
                // })

            },
            methods:{
                send:function(){
                    
                }
            }
        })
    </script>
</body>
</html>